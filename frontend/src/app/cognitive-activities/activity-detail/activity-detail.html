<!-- src/app/cognitive-activities/activity-detail/activity-detail.html -->
<div class="detail-container">
  <!-- Loading -->
  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <p>Chargement des dÃ©tails...</p>
  </div>

  <!-- Error -->
  <div *ngIf="error" class="error">
    <p>âš ï¸ {{ error }}</p>
    <button class="btn-back" (click)="goBack()">Retour Ã  la liste</button>
  </div>

  <!-- Detail Content -->
  <div *ngIf="!loading && !error && activity" class="detail-content">

    <!-- Header avec bouton retour -->
    <div class="detail-header">
      <button class="btn-back-icon" (click)="goBack()">â†</button>
      <h1>{{ activity.title }}</h1>
      <div class="header-actions">
        <button class="btn-play" (click)="playActivity()">â–¶ï¸ Jouer</button>
        <button class="btn-edit" (click)="editActivity()">âœï¸ Modifier</button>
      </div>
    </div>

    <!-- Badges -->
    <div class="badges-container">
      <span class="badge type-badge" [style.background]="getDifficultyColor(activity.type)">
        {{ getTypeIcon(activity.type) }} {{ getTypeText(activity.type) }}
      </span>
      <span class="badge difficulty-badge" [style.background]="getDifficultyColor(activity.difficulty)">
        {{ getDifficultyText(activity.difficulty) }}
      </span>
      <span class="badge status-badge" [class.active]="activity.isActive">
        {{ activity.isActive ? 'âœ… Active' : 'â›” Inactive' }}
      </span>
    </div>

    <!-- Description -->
    <div class="info-card">
      <h2>ğŸ“ Description</h2>
      <p class="description">{{ activity.description || 'Aucune description' }}</p>
    </div>

    <!-- Instructions -->
    <div class="info-card">
      <h2>ğŸ“‹ Instructions</h2>
      <p class="instructions">{{ activity.instructions || 'Aucune instruction' }}</p>
    </div>

    <!-- Game Stats -->
    <div class="stats-grid">
      <div class="stat-card">
        <span class="stat-icon">â­</span>
        <div class="stat-info">
          <span class="stat-label">Score max</span>
          <span class="stat-value">{{ activity.maxScore || 'N/A' }}</span>
        </div>
      </div>
      <div class="stat-card">
        <span class="stat-icon">â±ï¸</span>
        <div class="stat-info">
          <span class="stat-label">Temps limite</span>
          <span class="stat-value">{{ activity.timeLimit ? activity.timeLimit + 's' : 'IllimitÃ©' }}</span>
        </div>
      </div>
      <div class="stat-card">
        <span class="stat-icon">ğŸ“…</span>
        <div class="stat-info">
          <span class="stat-label">CrÃ©Ã© le</span>
          <span class="stat-value">{{ formatDate(activity.createdAt) }}</span>
        </div>
      </div>
      <div class="stat-card">
        <span class="stat-icon">ğŸ”„</span>
        <div class="stat-info">
          <span class="stat-label">ModifiÃ© le</span>
          <span class="stat-value">{{ formatDate(activity.updatedAt) }}</span>
        </div>
      </div>
    </div>

    <!-- Game Content (JSON formatÃ©) -->
    <div class="content-card" *ngIf="formattedContent">
      <h2>ğŸ“¦ Contenu du jeu</h2>
      <pre class="content-json">{{ formattedContent }}</pre>
    </div>

    <!-- Image (if any) -->
    <div class="image-card" *ngIf="activity.imageUrl">
      <h2>ğŸ–¼ï¸ Image</h2>
      <img [src]="activity.imageUrl" alt="Activity image" class="activity-image">
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <button class="btn-play-large" (click)="playActivity()">
        <span class="btn-icon">â–¶ï¸</span>
        Commencer le jeu
      </button>
      <button class="btn-edit-large" (click)="editActivity()">
        <span class="btn-icon">âœï¸</span>
        Modifier
      </button>
      <button class="btn-back-large" (click)="goBack()">
        <span class="btn-icon">â†</span>
        Retour
      </button>
    </div>
  </div>
</div>
